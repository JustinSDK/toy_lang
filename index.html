<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="首次嘗試打造的玩具語言。">
    <meta property="og:locale" content="zh_TW">
    <meta property="og:title" content="Toy Lang">
    <meta property="og:type" content="programming language">
    <meta property="og:url" content="https://openhome.cc/Gossip/Computation/toy_lang/index.html">
    <meta property="og:image" content="https://openhome.cc/Gossip/images/caterpillar_small.jpg">
    <meta property="og:site_name" content="OPENHOME.CC">
    <meta property="og:description" content="首次嘗試打造的玩具語言。">
    <title>Toy Lang</title>
    <style type="text/css">
        textarea {
           width:100%;
           height:300px;
           resize:none;
           overflow:auto;
        }   
    </style>
  </head>
  <body> <a href="https://openhome.cc"><img src="https://openhome.cc/Gossip/images/caterpillar_small_front.jpg"></a>
    <p>相關程式碼可在 <a href="https://github.com/JustinSDK/toy_lang">Github</a>
      找到，這是首次嘗試打造的玩具語言，可用的指令組合可參考底下的範例，運算式可使用括號，你的瀏覽器必須支援 ES6 模組。 </p>
    <ul>
      <li>九九乘法表</li>
    </ul>
    <pre><strong><code>i = 9
while i &gt; 0
    j = 8
    a = 10 - i
    while j &gt; 0
        b = 10 - j
        print b
        print '*'
        print a
        print '='
        print b * a
        print '\t'
        j = j - 1
    end
    print '\n'
    i = i - 1
end</code></strong></pre>
    <ul>
      <li>費式數列</li>
    </ul>
    <pre><strong><code>def printFibonacciNumbers(n)
    print n
    print ' Fibonacci numbers\n'
    n = n - 2
    fn1 = 1
    fn2 = 1
    print fn1
    print ' '
    print fn2
    print ' '
    while n &gt; 0
        fn = fn2 + fn1
        print fn
        print ' '
        fn1 = fn2
        fn2 = fn
        n = n - 1
    end
    print '\n\n'
end

printFibonacciNumbers(10)
printFibonacciNumbers(20)</code></strong></pre>
<ul>
    <li>河內塔</li>
  </ul>
  <pre><strong><code>def hanoi(n, a, b, c) 
    if n == 1
        print 'Move sheet from '
        print a
        print ' to '
        print c
        print '\n'
    else
        hanoi(n - 1, a, c, b)
        hanoi(1, a, b, c)
        hanoi(n - 1, b, a, c) 
    end
end

hanoi(3, 'A', 'B', 'C')</code></strong></pre>
<ul>
    <li>階乘</li>
  </ul>
  <pre><strong><code>def factorial(n)
    if n == 0
        return 1
    else
        return n * factorial(n - 1)
    end
end

n = 1
while n &lt;= 5
    print n
    print '! = '
    print factorial(n)
    print '\n'
    n = n + 1
end</code></strong></pre>
    <ul>
      <li>實驗室</li>
    </ul>
    <textarea id="code">print 'Hello, World'</textarea> <br>
    <br>
    <button id="run">執行</button> <br>
    <br>
    <textarea readonly="readonly" id="tty" style="background: #000;color:#fff;"></textarea>
    <script type="module">
    import {StmtTokenizer} from './js/tokenizer.js';
    import {AST} from './js/parser.js';

    function output(value) {
        tty.textContent += `${value}`.replace(/\\n/g, '\n').replace(/\\t/g, '\t');
    }

    document.getElementById('run').addEventListener('click', _ => {
        let code = document.getElementById('code').value;
        let tty = document.getElementById('tty');
        tty.textContent = '';
        new AST(new StmtTokenizer(code), output).evaluate();
    });
</script> </body>
</html>
